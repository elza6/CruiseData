
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Globe Test</title>

  <!-- Core libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <script src="https://unpkg.com/d3-geo-projection@4"></script>


  <!-- Styles -->
    <link rel="stylesheet" href="globe.css">
  <!-- Your app scripts (defer to avoid blocking the parser) -->
    <script src="globe.js" defer></script>
    <script  src="../JavaScripts/helpers.js" defer></script>
    
    <script  src="../JavaScripts/callData.js" defer></script>
    <script  src="../JavaScripts/vesselData.js" defer></script>
    <script  src="../JavaScripts/powerData.js" defer></script>
    <script  src="../JavaScripts/tutorial.js" defer></script>
    <script  src="../JavaScripts/tutorialModule.js" defer></script>
    <script  src="../JavaScripts/header.js" defer></script>
    <script  src="../JavaScripts/chartEmbed.js" defer></script>
    <script src="focus.js" defer></script>
    <script src="../JavaScripts/connections.js" defer></script>
    <script src="../JavaScripts/calendar.js" defer></script>
    
<!-- This installs Font Awesome-->
        <script src="https://kit.fontawesome.com/14dbedf33a.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  







  <!-- SheetJS (xlsx) must be available before export.js uses it -->
 <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js" defer></script>

  <!-- Export utilities that define CruiseExporter -->
 <script src ="../JavaScripts/export.js" defer></script>

  <!-- Buttons & modal behavior (the code moved out of the HTML) -->
<script src ="../JavaScripts/export-modal.js" defer></script>
</head>

<body>
  <header class="hBar" id="theHeaderBar">
    <h1>Cruise Data Portal</h1>

    <nav>
      <ul id="navBarItems">
        <li>Summary</li>
        <li>Vessels</li>
        <li>Services</li>
      </ul>
    </nav>

    <!-- Help icon -->
    <i id="help-btn" class="fa-regular fa-circle-question" title="Help" style="cursor:pointer;"></i>

    <!-- Export icon (clickable via JS by ID) -->
    <i id="download-combo"
       class="fa-solid fa-database"
       style="cursor:pointer;"
       title="Export Data"></i>
  </header>

  <div id="earth"></div>

  <div id="dataSpace">
    <div id="berthSpace"></div>

    <div id="cardSpace"></div>

    <div id="D3andME">
      <div class="kpiBucket" id="leftChartContainer">
        <div class="baseStats"></div>
        <div id="leftRadialChart" class="radial_anchor"></div>
        <div id="leftCentralChart"></div>
        <div class="glass" aria-hidden="true"></div>
      </div>

      <div class="kpiBucket" id="rightChartContainer">
        <div class="baseStats"></div>
        <div id="rightRadialChart" class="radial_anchor"></div>
        <div id="rightCentralChart"></div>
        <div class="glass" aria-hidden="true"></div>
      </div>
    </div>
    

<!-- Tutorial Overlay Root -->
<div id="tutorial-root" hidden>
  <div class="tut-overlay" aria-hidden="true"></div>
  <div class="tut-spotlight" aria-hidden="true"></div>

  <div class="tut-panel" role="dialog" aria-modal="true" aria-labelledby="tut-title">
    <h2 id="tut-title" class="tut-title"></h2>
    <div class="tut-content"></div>

<div class="tut-actions">
  <button type="button" class="tut-prev" aria-label="Previous step">Prev</button>
  <button type="button" class="tut-next" aria-label="Next step">Next</button>
  <button type="button" class="tut-done" aria-label="Skip tutorial">Skip Tour</button>
</div>

  </div>
</div>


  </body>

  </div>
<button id="openCalendarBtn" class="open-btn">View Upcoming Calls</button>

  <!-- Popup Modal - Dialog A -->
  <dialog id="exportChoiceModal" class="export-modal">
    <form method="dialog" class="export-modal__content">
      <div class="export-modal__header">
        <button
          type="button"
          id="exportModalCloseBtn"
          class="export-modal__close"
          aria-label="Close">✕</button>
      </div>
      <p>Please choose a format to export:</p>
      <div class="export-modal__actions">
        <button type="button" id="exportExcelBtn" class="btn btn-primary">Excel (.xlsx)</button>
        <button type="button" id="exportPdfBtn" class="btn btn-secondary">PDF (.pdf)</button>
      </div>
    </form>
  </dialog>


<!-- Second dialog for PDF selection - Dialog B -->
<dialog id="pdfSelectModal" class="export-modal">
  <form method="dialog" class="export-modal__content">
    <div class="export-modal__header">
      <button type="button" id="pdfModalCloseBtn" class="export-modal__close" aria-label="Close">✕</button>
      <h3>Select PDFs to open</h3>
    </div>

    <!-- Scrollable list -->
    <div class="export-modal__list" id="pdfListContainer" aria-label="PDF list">
      <!-- Populated dynamically by JS -->
    </div>

    <div class="export-modal__actions">
      <button type="button" id="openSelectedPdfsBtn" class="btn btn-primary">Open Selected</button>
      <button type="button" id="openAllPdfsBtn" class="btn btn-secondary">Open All</button>
    </div>
  </form>
</dialog>

<!-- Calendar Dialog -->
<dialog id="calendarDialog" class="calendar-dialog" aria-labelledby="calendarDialogTitle">
  <div class="dialog__header">
    <h3 id="calendarDialogTitle" class="dialog__title">Calendar</h3>
    <button id="closeCalendarBtn" class="dialog__close" aria-label="Close">✕</button>
  </div>
  <div class="dialog__body">
    <div class="calendar">
      <div class="calendar__header">
        <button id="prevBtn" class="calendar__nav-btn" aria-label="Previous month">Prev</button>
        <h4 id="monthYear" class="calendar__title">Month YYYY</h4>
        <button id="nextBtn" class="calendar__nav-btn" aria-label="Next month">Next</button>
      </div>
      <div id="calendarGrid" class="calendar__grid" aria-label="Calendar grid">
        <!-- Rendered by JS -->
      </div>
    </div>
  </div>
  </dialog>
</body>
</html>
